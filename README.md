# Salesforce from Fivetran
Fivetranâ€™s Salesforce Block makes it easy for business to build a comprehensive sales and customer analytics tool to understand their unique sales process with customizable reports and analysis at any level of aggregation.

### What does this Block do for me?

**(1) Go Beyond Simple Salesforce Reports** - Salesforce reports can be cumbersome and limited. With Looker, Fivetran and this block, dive deeper into your sales and customer success analysis to find out where your customers begin and how they progress through the entire customer lifecycle.

**(2) Historical and Cumulative Analysis** - This block adds historical analysis for opportunities to answer questions about when pipelines were created and how long they took to close, over time. Additionally, easily calculate customer lifetime value (LTV) and other metrics.

**(3) Combine Multiple Data Sources** - Through other Fivetran connectors, combine your Salesforce data with data from your operational systems, other SaaS apps, and more to get a holistic view of all your customer data in one central view.

**(4) Enterprise Data Platform** - Take advantage of Looker's data platform functionality, including [data actions](https://discourse.looker.com/t/data-actions/3573), scheduling, permissions, alerting, parameterization (each user can only see their own data), and more. Get immediate alerts when deals are closed, customers are at risk, or any other business criteria.

**(5) Usable / Shareable Dashboards** - Create centralized dashboards for the entire team, and departmental or individual dashboards for each user. Rest easy knowing everyone is looking at the same information at all times. Then schedule the dashboards for emails or alerts, period-end reporting, anomaly detection, or whatever else serves your use-case.



### Block Info

This Block is modeled on the schema brough in by Fivetran's [Salesforce connector](https://fivetran.com/docs/applications/salesforce). It will bring over all the tables that are available in the [Salesforce Schema](https://developer.salesforce.com/docs/atlas.en-us.api.meta/api/data_model.htm).

In order to use the Historical Snapshot explore, make sure to enable [Field History Tracking]( https://help.salesforce.com/articleView?id=tracking_field_history.htm&type=0) for the Opportunity tables.



### Block Structure

* **Base Views (_account, _campaign, etc)** - These views are automatically generated by the Looker [generator](https://discourse.looker.com/t/how-to-access-a-new-table-in-your-database-in-looker/488). If you are using custom Salesforce fields (which most organizations are), simply delete each view that starts with _underscore and regenerate them by clicking "Create View from Table". Make sure to rename them back from `viewname` to `_viewname` and add `extension: required` to each.

* **sf_extends** - This file contains all the customizations to the base views through Looker's [extension](https://docs.looker.com/data-modeling/learning-lookml/extends) functionality. Make changes here instead of the base `_views`  so that you can easily re-generate the base views if your Salesforce schema changes.

* **sf_opportunity_snapshot** - This uses the [Slowly Changing Dimensions](https://discourse.looker.com/t/analytic-block-state-or-status-data-and-slowly-changing-dimensions/1937) block to do historical snapshotting of opportunities.

* **sf_opportunity_facts** - This shows an example of creating a derived table to calculate Customer Lifetime Value (CLTV).


### Implementation Instructions / Required Customizations

* **Schama Names** - You may need to change the table schema names, do a find/replace for `sql_table_name: salesforce.`

* **Base Views** - Generate fresh views for each table that starts with an _underscore so that you get any customizations to your Salesforce instance (see above).

* **Company Specific Logic** - Inside of sf_extends you'll find some assumptions about your sales stages, what you consider a customer, what the amount fields in an opportunity mean and more. Work with your Salesforce admin to make sure you've mapped the logic correctly.

* **Dashboards** - Rename the model in each LookML Dashboard element from "salesforce_fivetran" to the model name you've selected. This is easily accomplished using a global Find & Replace (available in the top right of your screen).

* **Datagroup** - Fivetran can sync Salesforce data to your warehouse as frequently [as every 5 minutes](https://github.com/llooker/salesforce_fivetran/blob/master/fivetran_sync.png)!
In order to take advantage of the configured speed, you'll find a [datagroup](https://docs.looker.com/admin-options/database/datagroups) configured in the model. Adjust it based on your needs.

* **Derived Tables** - If there are views for derived tables, the `sql_table_name` parameter must be changed to match your table names. We also recommend using a global Find & Replace for this. At the time of this writing, this block contains no derived tables.

### What if I find an error? Have suggestions for improvements?

Great! Blocks were designed for continuous improvement through the help of the entire Looker community, and we'd love your input. To log an error or improvement recommendation, simply create a "New Issue" in the corresponding [Github repo for this Block](https://github.com/llooker/salesforce_fivetran/issues). Please be as detailed as possible in your explanation, and we'll address it as quickly as we can.
